<div class="relative">
  <button
    (click)="toggle()"
    class="w-10 h-10 p-2 rounded-full bg-white/10 hover:bg-white/20 text-xl transition-all duration-300 cursor-pointer border border-white/20 hover:scale-125 hover:rotate-12 flex items-center justify-center">
    ðŸ˜Š
  </button>

  @if (isOpen()) {
    <div class="absolute bottom-full left-0 mb-2 w-80 h-96 bg-white/10 backdrop-blur-2xl border border-white/20 rounded-3xl shadow-2xl overflow-hidden z-50 animate-[slideIn_0.3s_ease-out]">
      <!-- Header -->
      <div class="p-3 border-b border-white/20 bg-gradient-to-r from-purple-500/20 via-pink-500/20 to-blue-500/20">
        <div class="flex items-center justify-between mb-2">
          <h3 class="text-lg font-bold text-white">Emoji Picker</h3>
          <button
            (click)="toggle()"
            class="w-8 h-8 p-1 rounded-full hover:bg-white/20 transition-colors text-white/70 hover:text-white flex items-center justify-center">
            âœ•
          </button>
        </div>
        
        <!-- Category Tabs -->
        <div class="flex gap-2 overflow-x-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]">
          @for (category of categories; track category.name) {
            <button
              (click)="setCategory(category.name)"
              class="flex-shrink-0 px-3 py-1.5 rounded-full text-lg transition-all duration-300"
              [class.bg-white/20]="activeCategory() === category.name"
              [class.bg-white/5]="activeCategory() !== category.name"
              [class.scale-110]="activeCategory() === category.name"
              [class.shadow-lg]="activeCategory() === category.name">
              {{ category.icon }}
            </button>
          }
        </div>
      </div>

      <!-- Emoji Grid -->
      <div class="p-3 h-[calc(100%-100px)] overflow-y-auto scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-transparent">
        <div class="grid grid-cols-8 gap-2">
          @for (emoji of getActiveEmojis(); track emoji) {
            <button
              (click)="selectEmoji(emoji)"
              class="w-10 h-10 p-2 text-2xl rounded-full bg-white/5 hover:bg-white/20 hover:scale-125 transition-all duration-300 cursor-pointer border border-transparent hover:border-white/30 hover:shadow-lg hover:shadow-purple-500/30 flex items-center justify-center">
              {{ emoji }}
            </button>
          }
        </div>
      </div>
    </div>
  }
</div>

