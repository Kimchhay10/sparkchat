<div 
  class="flex animate-[slideIn_0.3s_ease-out]"
  [class.justify-end]="isOwn()">
  <div 
    class="flex items-start gap-3 max-w-[70%] p-4 rounded-2xl backdrop-blur-md transition-all duration-300 relative"
    [attr.data-message-id]="message().id"
    [class.bg-white/15]="!isOwn()"
    [class.border]="!isOwn()"
    [class.border-white/20]="!isOwn()"
    [class.bg-gradient-to-r]="isOwn()"
    [class.from-purple-500/80]="isOwn()"
    [class.via-pink-500/80]="isOwn()"
    [class.to-blue-500/80]="isOwn()"
    [class.border-white/30]="isOwn()"
    [class.shadow-lg]="isOwn()"
    [class.shadow-purple-500/30]="isOwn()"
    [class.hover:shadow-xl]="isOwn()"
    [class.hover:shadow-purple-500/50]="isOwn()"
    [class.hover:scale-[1.02]]="isOwn()">
    @if (!isOwn()) {
      <div class="text-2xl flex-shrink-0 animate-[float_4s_ease-in-out_infinite]">{{ avatar() }}</div>
    }
    <div class="flex-1">
      @if (!isOwn()) {
        <div class="text-xs font-bold mb-1 text-purple-300">{{ message().username }}</div>
      }
      @if (isGif()) {
        <div class="mb-1 rounded-xl overflow-hidden">
          <img [src]="message().message" alt="GIF" class="max-w-full h-auto rounded-xl" loading="lazy" />
        </div>
      } @else {
        <div class="text-white text-base mb-1 break-words whitespace-pre-wrap">{{ message().message }}</div>
      }
      <div class="text-xs text-white/60 mt-1">{{ formatTime(timestamp()) }}</div>
    </div>
    @if (isOwn()) {
      <div class="text-xs text-white/70 flex-shrink-0 self-end">✓✓</div>
    }
  </div>
</div>

